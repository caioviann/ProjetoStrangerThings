{"ast":null,"code":"var _jsxFileName = \"/Users/caiohenrique/Documents/projetos-pessoais/ProjetoStrangerThings/src/components/AudioPlayer/index.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from 'react';\nimport './style.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction AudioPlayer({\n  src,\n  loop = true,\n  autoplay = true,\n  volume = 0.4\n}) {\n  _s();\n  const audioRef = useRef(null);\n  const [showPlayButton, setShowPlayButton] = useState(false);\n  const [hasInteracted, setHasInteracted] = useState(false);\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio) return;\n\n    // Configura o volume e loop imediatamente\n    audio.volume = volume;\n    audio.loop = loop;\n    audio.muted = false;\n    const tryPlay = async () => {\n      try {\n        audio.currentTime = 0;\n        const playPromise = audio.play();\n        if (playPromise !== undefined) {\n          await playPromise;\n        }\n        setHasInteracted(true);\n        setShowPlayButton(false);\n      } catch (error) {\n        // Autoplay bloqueado - mostra bot칚o\n        setShowPlayButton(true);\n      }\n    };\n\n    // Tenta tocar quando o 치udio tiver dados suficientes para come칞ar\n    const handleLoadedData = () => {\n      if (autoplay && !hasInteracted) {\n        tryPlay();\n      }\n    };\n    const handleCanPlay = () => {\n      if (autoplay && !hasInteracted) {\n        tryPlay();\n      }\n    };\n    const handleCanPlayThrough = () => {\n      if (autoplay && !hasInteracted) {\n        tryPlay();\n      }\n    };\n\n    // Adiciona m칰ltiplos listeners para pegar o momento certo\n    audio.addEventListener('loadeddata', handleLoadedData);\n    audio.addEventListener('canplay', handleCanPlay);\n    audio.addEventListener('canplaythrough', handleCanPlayThrough);\n\n    // Tenta tocar imediatamente se j치 tiver dados\n    if (autoplay && audio.readyState >= 2 && !hasInteracted) {\n      setTimeout(() => tryPlay(), 100);\n    }\n\n    // Tenta tocar ap칩s um pequeno delay para garantir que est치 pronto\n    const immediatePlay = setTimeout(() => {\n      if (autoplay && !hasInteracted && audio.readyState >= 2) {\n        tryPlay();\n      }\n    }, 200);\n\n    // Handler para intera칞칚o do usu치rio (fallback)\n    const handleUserInteraction = () => {\n      if (autoplay && !hasInteracted && audio) {\n        tryPlay();\n      }\n    };\n\n    // Escuta intera칞칫es do usu치rio na p치gina inteira\n    document.addEventListener('click', handleUserInteraction, {\n      once: true,\n      passive: true\n    });\n    document.addEventListener('touchstart', handleUserInteraction, {\n      once: true,\n      passive: true\n    });\n    document.addEventListener('keydown', handleUserInteraction, {\n      once: true,\n      passive: true\n    });\n    return () => {\n      clearTimeout(immediatePlay);\n      audio.removeEventListener('loadeddata', handleLoadedData);\n      audio.removeEventListener('canplay', handleCanPlay);\n      audio.removeEventListener('canplaythrough', handleCanPlayThrough);\n      document.removeEventListener('click', handleUserInteraction);\n      document.removeEventListener('touchstart', handleUserInteraction);\n      document.removeEventListener('keydown', handleUserInteraction);\n    };\n  }, [autoplay, loop, volume, hasInteracted, src]);\n  const handlePlayClick = async () => {\n    const audio = audioRef.current;\n    if (audio) {\n      try {\n        audio.currentTime = 0;\n        await audio.play();\n        setShowPlayButton(false);\n        setHasInteracted(true);\n      } catch (error) {\n        console.error('Erro ao tocar m칰sica:', error);\n      }\n    }\n  };\n  if (!src) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n      ref: audioRef,\n      src: src,\n      loop: loop,\n      preload: \"auto\",\n      autoPlay: autoplay,\n      playsInline: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this), showPlayButton && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"play-music-button\",\n      onClick: handlePlayClick,\n      children: \"\\uD83C\\uDFB5 Tocar M\\xFAsica\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n}\n_s(AudioPlayer, \"2ICmOmbuJ2V3h6CbI1rn6RuKNT4=\");\n_c = AudioPlayer;\nexport default AudioPlayer;\nvar _c;\n$RefreshReg$(_c, \"AudioPlayer\");","map":{"version":3,"names":["useEffect","useRef","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","AudioPlayer","src","loop","autoplay","volume","_s","audioRef","showPlayButton","setShowPlayButton","hasInteracted","setHasInteracted","audio","current","muted","tryPlay","currentTime","playPromise","play","undefined","error","handleLoadedData","handleCanPlay","handleCanPlayThrough","addEventListener","readyState","setTimeout","immediatePlay","handleUserInteraction","document","once","passive","clearTimeout","removeEventListener","handlePlayClick","console","children","ref","preload","autoPlay","playsInline","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","_c","$RefreshReg$"],"sources":["/Users/caiohenrique/Documents/projetos-pessoais/ProjetoStrangerThings/src/components/AudioPlayer/index.jsx"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport './style.css';\n\nfunction AudioPlayer({ src, loop = true, autoplay = true, volume = 0.4 }) {\n    const audioRef = useRef(null);\n    const [showPlayButton, setShowPlayButton] = useState(false);\n    const [hasInteracted, setHasInteracted] = useState(false);\n\n    useEffect(() => {\n        const audio = audioRef.current;\n        \n        if (!audio) return;\n        \n        // Configura o volume e loop imediatamente\n        audio.volume = volume;\n        audio.loop = loop;\n        audio.muted = false;\n\n        const tryPlay = async () => {\n            try {\n                audio.currentTime = 0;\n                const playPromise = audio.play();\n                if (playPromise !== undefined) {\n                    await playPromise;\n                }\n                setHasInteracted(true);\n                setShowPlayButton(false);\n            } catch (error) {\n                // Autoplay bloqueado - mostra bot칚o\n                setShowPlayButton(true);\n            }\n        };\n\n        // Tenta tocar quando o 치udio tiver dados suficientes para come칞ar\n        const handleLoadedData = () => {\n            if (autoplay && !hasInteracted) {\n                tryPlay();\n            }\n        };\n\n        const handleCanPlay = () => {\n            if (autoplay && !hasInteracted) {\n                tryPlay();\n            }\n        };\n\n        const handleCanPlayThrough = () => {\n            if (autoplay && !hasInteracted) {\n                tryPlay();\n            }\n        };\n\n        // Adiciona m칰ltiplos listeners para pegar o momento certo\n        audio.addEventListener('loadeddata', handleLoadedData);\n        audio.addEventListener('canplay', handleCanPlay);\n        audio.addEventListener('canplaythrough', handleCanPlayThrough);\n        \n        // Tenta tocar imediatamente se j치 tiver dados\n        if (autoplay && audio.readyState >= 2 && !hasInteracted) {\n            setTimeout(() => tryPlay(), 100);\n        }\n\n        // Tenta tocar ap칩s um pequeno delay para garantir que est치 pronto\n        const immediatePlay = setTimeout(() => {\n            if (autoplay && !hasInteracted && audio.readyState >= 2) {\n                tryPlay();\n            }\n        }, 200);\n\n        // Handler para intera칞칚o do usu치rio (fallback)\n        const handleUserInteraction = () => {\n            if (autoplay && !hasInteracted && audio) {\n                tryPlay();\n            }\n        };\n\n        // Escuta intera칞칫es do usu치rio na p치gina inteira\n        document.addEventListener('click', handleUserInteraction, { once: true, passive: true });\n        document.addEventListener('touchstart', handleUserInteraction, { once: true, passive: true });\n        document.addEventListener('keydown', handleUserInteraction, { once: true, passive: true });\n\n        return () => {\n            clearTimeout(immediatePlay);\n            audio.removeEventListener('loadeddata', handleLoadedData);\n            audio.removeEventListener('canplay', handleCanPlay);\n            audio.removeEventListener('canplaythrough', handleCanPlayThrough);\n            document.removeEventListener('click', handleUserInteraction);\n            document.removeEventListener('touchstart', handleUserInteraction);\n            document.removeEventListener('keydown', handleUserInteraction);\n        };\n    }, [autoplay, loop, volume, hasInteracted, src]);\n\n    const handlePlayClick = async () => {\n        const audio = audioRef.current;\n        if (audio) {\n            try {\n                audio.currentTime = 0;\n                await audio.play();\n                setShowPlayButton(false);\n                setHasInteracted(true);\n            } catch (error) {\n                console.error('Erro ao tocar m칰sica:', error);\n            }\n        }\n    };\n\n    if (!src) {\n        return null;\n    }\n\n    return (\n        <>\n            <audio \n                ref={audioRef}\n                src={src}\n                loop={loop}\n                preload=\"auto\"\n                autoPlay={autoplay}\n                playsInline\n            />\n            {showPlayButton && (\n                <button \n                    className=\"play-music-button\"\n                    onClick={handlePlayClick}\n                >\n                    游꿧 Tocar M칰sica\n                </button>\n            )}\n        </>\n    );\n}\n\nexport default AudioPlayer;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}